(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1557cd98"],{"6c8e":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"orderDetail"},[r("van-sticky",[r("van-nav-bar",{directives:[{name:"buttonThrotFromMx",rawName:"v-buttonThrotFromMx",value:e.onClickLeft,expression:"onClickLeft"}],attrs:{title:"订单详情","left-text":"返回","left-arrow":""}})],1),r("div",{staticClass:"Detailcontent"},[e._l(e.orderData,(function(t,a){return r("van-card",{key:a,staticClass:"OrderWrap",attrs:{price:t.price+".00",num:t.number,desc:t.product.description,title:t.product.name,thumb:e.orderCustomer.userFace}})})),""!=e.orderData?r("van-cell-group",{attrs:{border:""}},[r("van-cell",[r("div",{staticClass:"Sum"},[e._v(" 总计: "),r("span",{staticClass:"money"},[e._v("￥"+e._s(this.sum))])])])],1):e._e(),r("van-sticky",[r("div",{staticClass:"d_content"},["待接单"===e.status?r("span",{staticStyle:{color:"red","margin-right":"20px","font-size":"13px"}},[e._v(e._s(e.status))]):"待派单"===e.status?r("span",{staticStyle:{color:"purple","margin-right":"20px","font-size":"13px"}},[e._v(e._s(e.status))]):"待确认"===e.status||"待服务"===e.status?r("span",{staticStyle:{color:"orange","margin-right":"20px","font-size":"13px"}},[e._v(e._s(e.status))]):"待支付"===e.status?r("span",{staticStyle:{color:"red","margin-right":"20px","font-size":"13px"}},[e._v(e._s(e.status))]):r("span",{staticStyle:{color:"green","margin-right":"20px","font-size":"13px"}},[e._v(e._s(e.status))]),r("p",[e._v(" 服务地址："+e._s(e.orderAddress.province+e.orderAddress.city+e.orderAddress.area+e.orderAddress.address)+" ")]),r("p",[e._v(" 联系方式："+e._s(e.orderCustomer.username)+" ("+e._s(e.orderCustomer.telephone)+") ")]),r("p",[e._v(" 下单时间： "+e._s(e.moment(Number(e.orderTime)).format("YYYY/MM/DD HH:mm:ss a"))+" ")]),r("p",[e._v(" 服务时间： "+e._s(e.moment(Number(e.serveTime)).format("YYYY/MM/DD HH:mm:ss a"))+" ")])]),"待接单"===e.status?r("van-button",{directives:[{name:"buttonThrotFromMx",rawName:"v-buttonThrotFromMx",value:function(){return e.confirmOrder(e.orderid)},expression:"()=>confirmOrder(orderid)"}],staticClass:"cancelButton",attrs:{color:"linear-gradient(to right top, rgb(117, 121, 255), rgb(191, 115, 255))"}},[e._v("确认接单")]):e._e(),"待接单"===e.status?r("van-button",{directives:[{name:"buttonThrotFromMx",rawName:"v-buttonThrotFromMx",value:function(){return e.rejectOrder(e.orderid)},expression:"()=>rejectOrder(orderid)"}],staticClass:"cancelButton",attrs:{color:"linear-gradient(to right top, rgb(117, 121, 255), rgb(191, 115, 255))"}},[e._v("拒绝接单")]):e._e(),"待服务"===e.status?r("van-button",{directives:[{name:"buttonThrotFromMx",rawName:"v-buttonThrotFromMx",value:function(){return e.sericeCompleteOrder(e.orderid)},expression:"()=>sericeCompleteOrder(orderid)"}],staticClass:"cancelButton",attrs:{color:"linear-gradient(to right top, rgb(117, 121, 255), rgb(191, 115, 255))"}},[e._v("服务结束")]):e._e()],1),""==e.orderData?r("van-empty",{attrs:{description:"该订单无数据"}}):e._e(),r("div",{staticStyle:{height:"100px"}})],2)],1)},s=[],n=r("1da1"),o=r("5530"),i=r("ade3"),c=(r("96cf"),r("b0c0"),r("dac6")),u=r("2f62"),d=r("2241"),m=r("c1df"),l={components:Object(i["a"])({},d["a"].Component.name,d["a"].Component),data:function(){return{moment:m,sum:this.$route.query.total,orderid:this.$route.query.orderId,orderData:[],orderAddress:{},orderCustomer:{},serveTime:"",orderTime:this.$route.query.orderTime,status:this.$route.query.status,count:0,isLoading:!1}},methods:Object(o["a"])(Object(o["a"])({},Object(u["b"])("order",["getAllOrderDateMx"])),{},{onClickLeft:function(){this.$router.go(-1)},qureyDataById:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("this.orderid",e.orderid),r={id:e.orderid},t.next=4,Object(c["a"])("/order/findById",Object(o["a"])({},r));case 4:a=t.sent,e.orderData=a.data.data.orderLines,e.orderAddress=a.data.data.address,e.orderCustomer=a.data.data.customer,e.serveTime=a.data.data.serviceTime;case 9:case"end":return t.stop()}}),t)})))()},confirmOrder:function(){var e=this;d["a"].confirm({title:"确认接单",message:"点击确认进行接单，操作不可撤销请谨慎选择。"}).then(Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={orderId:e.orderid},t.next=3,Object(c["a"])("/order/takeOrder",Object(o["a"])({},r));case 3:a=t.sent,200===a.status?(e.$notify({message:"接单成功",type:"success"}),setTimeout((function(){e.$router.go(-1),e.getAllOrderDateMx()}),600)):e.$notify({message:a.data.message,type:"danger"});case 5:case"end":return t.stop()}}),t)})))).catch((function(){e.$notify({message:"取消成功",type:"success"})}))},rejectOrder:function(){var e=this;d["a"].confirm({title:"拒绝接单",message:"点击确认拒绝接单，操作不可撤销请谨慎选择。"}).then(Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={orderId:e.orderid},t.next=3,Object(c["a"])("/order/rejectOrder",Object(o["a"])({},r));case 3:a=t.sent,200===a.status?(e.$notify({message:"拒绝接单成功",type:"success"}),setTimeout((function(){e.$router.go(-1),e.getAllOrderDateMx()}),600)):e.$notify({message:a.data.message,type:"danger"});case 5:case"end":return t.stop()}}),t)})))).catch((function(){e.$notify({message:"取消成功",type:"success"})}))},sericeCompleteOrder:function(){var e=this;d["a"].confirm({title:"服务结束",message:"服务结束后请点击确认，等待用户确认服务已完成，操作不可撤销请谨慎选择。"}).then(Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={orderId:e.orderid},t.next=3,Object(c["a"])("/order/serviceCompleteOrder",Object(o["a"])({},r));case 3:a=t.sent,200===a.status?(e.$notify({message:"服务已结束，待用户确认，辛苦了",type:"success"}),setTimeout((function(){e.$router.go(-1),e.getAllOrderDateMx()}),600)):e.$notify({message:a.data.message,type:"danger"});case 5:case"end":return t.stop()}}),t)})))).catch((function(){e.$notify({message:"取消成功",type:"success"})}))}}),created:function(){this.qureyDataById()}},p=l,f=(r("cc1a"),r("2877")),g=Object(f["a"])(p,a,s,!1,null,null,null);t["default"]=g.exports},b0c0:function(e,t,r){var a=r("83ab"),s=r("9bf2").f,n=Function.prototype,o=n.toString,i=/^\s*function ([^ (]*)/,c="name";a&&!(c in n)&&s(n,c,{configurable:!0,get:function(){try{return o.call(this).match(i)[1]}catch(e){return""}}})},cc1a:function(e,t,r){"use strict";r("e4ec")},e4ec:function(e,t,r){}}]);
//# sourceMappingURL=chunk-1557cd98.e06d3b6f.js.map